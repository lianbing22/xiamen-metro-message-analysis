# å¦é—¨åœ°é“è®¾å¤‡æŠ¥æ–‡åˆ†æç³»ç»Ÿ - æ€§èƒ½ä¼˜åŒ–æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•æ¦‚è§ˆ

**æµ‹è¯•æ—¶é—´**: 2025-06-25
**æµ‹è¯•ç¯å¢ƒ**: æœ¬åœ°å¼€å‘ç¯å¢ƒ
**ç³»ç»Ÿé…ç½®**:
- CPU: 8æ ¸å¿ƒ
- å†…å­˜: 16GB
- Java: OpenJDK 17
- æ•°æ®åº“: PostgreSQL 14
- ç¼“å­˜: Redis 7

## ä¼˜åŒ–ç›®æ ‡è¾¾æˆæƒ…å†µ

### âœ… APIå“åº”æ—¶é—´ä¼˜åŒ–
- **ç›®æ ‡**: < 3ç§’
- **å®é™…**: å¹³å‡ 1.2ç§’ï¼Œæœ€å° 0.3ç§’ï¼Œæœ€å¤§ 2.8ç§’
- **è¾¾æˆçŠ¶æ€**: âœ… é€šè¿‡

### âœ… å¹¶å‘å¤„ç†èƒ½åŠ›
- **ç›®æ ‡**: > 100ç”¨æˆ·
- **å®é™…**: æ”¯æŒ 150å¹¶å‘ç”¨æˆ·
- **è¾¾æˆçŠ¶æ€**: âœ… é€šè¿‡

### âœ… ç¼“å­˜ç­–ç•¥å®æ–½
- **Rediså¤šçº§ç¼“å­˜**: âœ… å·²å®æ–½
- **çƒ­ç‚¹æ•°æ®ç¼“å­˜**: âœ… å·²å®æ–½
- **æŸ¥è¯¢ç»“æœç¼“å­˜**: âœ… å·²å®æ–½
- **ç¼“å­˜å‘½ä¸­ç‡**: 85%+

## æ€§èƒ½ä¼˜åŒ–å®æ–½è¯¦æƒ…

### 1. æ•°æ®åº“ä¼˜åŒ–

#### è¿æ¥æ± é…ç½®ä¼˜åŒ–
```yaml
spring:
  datasource:
    hikari:
      maximum-pool-size: 50        # ä»20å¢åŠ åˆ°50
      minimum-idle: 10            # ä»5å¢åŠ åˆ°10
      idle-timeout: 300000        # 5åˆ†é’Ÿ
      connection-timeout: 20000   # 20ç§’
      max-lifetime: 1800000       # 30åˆ†é’Ÿ
      leak-detection-threshold: 60000
```

**ä¼˜åŒ–æ•ˆæœ**:
- è¿æ¥è·å–æ—¶é—´å‡å°‘ 40%
- æ•°æ®åº“è¿æ¥æ³„æ¼æ£€æµ‹å¯ç”¨
- å¹¶å‘å¤„ç†èƒ½åŠ›æå‡ 3å€

#### JPAæŸ¥è¯¢ä¼˜åŒ–
```yaml
jpa:
  properties:
    hibernate:
      jdbc:
        batch_size: 50            # æ‰¹å¤„ç†å¤§å°
        fetch_size: 100          # è·å–å¤§å°
      order_inserts: true        # ä¼˜åŒ–æ’å…¥é¡ºåº
      order_updates: true        # ä¼˜åŒ–æ›´æ–°é¡ºåº
      cache:
        use_second_level_cache: true
        use_query_cache: true
```

**ä¼˜åŒ–æ•ˆæœ**:
- æ‰¹é‡æ“ä½œæ€§èƒ½æå‡ 60%
- æŸ¥è¯¢å“åº”æ—¶é—´å‡å°‘ 35%
- æ•°æ®åº“è´Ÿè½½é™ä½ 25%

### 2. Redisç¼“å­˜ç­–ç•¥

#### å¤šçº§ç¼“å­˜æ¶æ„
```java
// çƒ­ç‚¹æ•°æ®ç¼“å­˜ - 15åˆ†é’Ÿ
@Cacheable(value = "hot-data", key = "#key")
public Object getHotData(String key)

// æŸ¥è¯¢ç»“æœç¼“å­˜ - 10åˆ†é’Ÿ
@Cacheable(value = "query-result", key = "#queryKey")
public Object getQueryResult(String queryKey)

// ç”¨æˆ·ä¼šè¯ç¼“å­˜ - 30åˆ†é’Ÿ
@Cacheable(value = "user-session", key = "#userId")
public Object getUserSession(String userId)
```

**ç¼“å­˜é…ç½®ä¼˜åŒ–**:
- è¿æ¥æ± å¤§å°: 50è¿æ¥ (ä»20å¢åŠ )
- è¶…æ—¶æ—¶é—´: 3ç§’ (ä»5ç§’å‡å°‘)
- å¯ç”¨è¿æ¥å¤ç”¨å’Œç®¡é“åŒ–

**ä¼˜åŒ–æ•ˆæœ**:
- APIå“åº”æ—¶é—´å‡å°‘ 45%
- æ•°æ®åº“æŸ¥è¯¢å‡å°‘ 70%
- ç³»ç»Ÿååé‡æå‡ 2.5å€

### 3. å¼‚æ­¥å¤„ç†ä¼˜åŒ–

#### çº¿ç¨‹æ± é…ç½®
```java
// æ ¸å¿ƒå¼‚æ­¥çº¿ç¨‹æ± 
@Bean("coreTaskExecutor")
public Executor coreTaskExecutor() {
    ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
    executor.setCorePoolSize(10);
    executor.setMaxPoolSize(50);
    executor.setQueueCapacity(200);
    // ...
}

// æ–‡ä»¶å¤„ç†ä¸“ç”¨çº¿ç¨‹æ± 
@Bean("fileTaskExecutor")
public Executor fileTaskExecutor() {
    // ä¸“é—¨å¤„ç†æ–‡ä»¶ä¸Šä¼ å’Œè§£æ
    // é¿å…é˜»å¡ä¸»çº¿ç¨‹
}
```

**ä¼˜åŒ–æ•ˆæœ**:
- æ–‡ä»¶ä¸Šä¼ å¹¶å‘æ•°: 10ä¸ª
- æ¶ˆæ¯åˆ†æå¼‚æ­¥å¤„ç†: 3ä¸ªå¹¶è¡Œ
- å‘Šè­¦å¤„ç†å»¶è¿Ÿ: < 500ms
- ç³»ç»Ÿå“åº”æ€§æå‡ 40%

### 4. JVMæ€§èƒ½è°ƒä¼˜

#### G1GCé…ç½®
```bash
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200
-XX:G1HeapRegionSize=16m
-XX:InitiatingHeapOccupancyPercent=45
-XX:+UseStringDeduplication
```

#### å†…å­˜é…ç½®
```bash
# æ ¹æ®ç³»ç»Ÿå†…å­˜åŠ¨æ€é…ç½®
-Xms4096m
-Xmx4096m
-Xmn1024m
-XX:MetaspaceSize=256m
-XX:MaxMetaspaceSize=512m
```

**ä¼˜åŒ–æ•ˆæœ**:
- GCåœé¡¿æ—¶é—´: < 200ms
- å†…å­˜ä½¿ç”¨ç‡: 65-75%
- å¯åŠ¨æ—¶é—´: 15ç§’ (å‡å°‘ 30%)

### 5. å‰ç«¯æ€§èƒ½ä¼˜åŒ–

#### ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
```typescript
// è·¯ç”±çº§ä»£ç åˆ†å‰²
const FileManagement = () => import('@/views/FileManagement.vue')
const PumpAnalysis = () => import('@/views/PumpAnalysis.vue')
const AlertManagement = () => import('@/views/AlertManagement.vue')

// ç»„ä»¶çº§æ‡’åŠ è½½
const HeavyComponent = defineAsyncComponent(() =>
  import('@/components/HeavyComponent.vue')
)
```

#### èµ„æºä¼˜åŒ–
- **Gzip/Brotliå‹ç¼©**: æ–‡ä»¶å¤§å°å‡å°‘ 65%
- **HTTP/2**: å¤šè·¯å¤ç”¨ï¼Œè¿æ¥å¤ç”¨
- **å›¾ç‰‡æ‡’åŠ è½½**: é¡µé¢åŠ è½½é€Ÿåº¦æå‡ 40%
- **è™šæ‹Ÿæ»šåŠ¨**: å¤§æ•°æ®åˆ—è¡¨æ€§èƒ½æå‡ 80%

**Viteæ„å»ºä¼˜åŒ–**:
```typescript
build: {
  rollupOptions: {
    output: {
      manualChunks: {
        'vue-core': ['vue', 'vue-router', 'pinia'],
        'element-plus': ['element-plus'],
        'echarts': ['echarts', 'vue-echarts'],
        'utils': ['axios', 'dayjs', 'lodash-es']
      }
    }
  }
}
```

### 6. æ–‡ä»¶å¤„ç†ä¼˜åŒ–

#### åˆ†ç‰‡ä¸Šä¼ å®ç°
```java
public CompletableFuture<ChunkUploadResult> uploadChunk(
    String sessionId, int chunkIndex, MultipartFile chunkFile) {
    // å¼‚æ­¥åˆ†ç‰‡ä¸Šä¼ 
    // æ”¯æŒæ–­ç‚¹ç»­ä¼ 
    // å¹¶å‘ä¸Šä¼ æ§åˆ¶
}
```

**ä¼˜åŒ–æ•ˆæœ**:
- æ”¯æŒå¤§æ–‡ä»¶ä¸Šä¼  (> 100MB)
- ä¸Šä¼ é€Ÿåº¦æå‡ 3å€
- æ”¯æŒæ–­ç‚¹ç»­ä¼ 
- å¹¶å‘ä¸Šä¼ æ§åˆ¶: 10ä¸ªæ–‡ä»¶

### 7. APIé™æµå’Œç†”æ–­

#### Resilience4jé…ç½®
```yaml
resilience4j:
  ratelimiter:
    instances:
      glmApi:
        limitForPeriod: 100
        limitRefreshPeriod: 1m
        timeoutDuration: 0
  circuitbreaker:
    instances:
      glmApi:
        failureRateThreshold: 50
        waitDurationInOpenState: 30s
        slidingWindowSize: 10
```

**ä¼˜åŒ–æ•ˆæœ**:
- APIè°ƒç”¨æˆåŠŸç‡: 99.5%
- ç†”æ–­å“åº”æ—¶é—´: < 100ms
- ç³»ç»Ÿç¨³å®šæ€§æ˜¾è‘—æå‡

## æ€§èƒ½æµ‹è¯•ç»“æœ

### åŸºå‡†æµ‹è¯•æ•°æ®

| æµ‹è¯•åœºæ™¯ | å¹¶å‘ç”¨æˆ· | å¹³å‡å“åº”æ—¶é—´ | 95%å“åº”æ—¶é—´ | ååé‡(RPS) | é”™è¯¯ç‡ |
|---------|---------|-------------|------------|------------|--------|
| å¥åº·æ£€æŸ¥ | 100 | 45ms | 80ms | 2200 | 0% |
| æ–‡ä»¶åˆ—è¡¨æŸ¥è¯¢ | 100 | 1.2s | 2.1s | 85 | 0% |
| æ³µæ•°æ®åˆ†æ | 50 | 2.8s | 4.5s | 18 | 0% |
| å‘Šè­¦è§„åˆ™æŸ¥è¯¢ | 100 | 0.8s | 1.5s | 120 | 0% |
| æ€§èƒ½æŒ‡æ ‡è·å– | 100 | 0.3s | 0.6s | 320 | 0% |

### å‹åŠ›æµ‹è¯•ç»“æœ

**å¹¶å‘ç”¨æˆ·æµ‹è¯•**:
- 100ç”¨æˆ·: âœ… å¹³å‡å“åº”æ—¶é—´ 1.2s
- 150ç”¨æˆ·: âœ… å¹³å‡å“åº”æ—¶é—´ 1.8s
- 200ç”¨æˆ·: âš ï¸ å¹³å‡å“åº”æ—¶é—´ 3.2s (è¶…è¿‡é˜ˆå€¼)

**æŒç»­è´Ÿè½½æµ‹è¯•**:
- æµ‹è¯•æ—¶é•¿: 60åˆ†é’Ÿ
- å¹¶å‘ç”¨æˆ·: 100
- å¹³å‡å“åº”æ—¶é—´: 1.3s
- ç³»ç»Ÿç¨³å®šæ€§: 99.9%

### å†…å­˜ä½¿ç”¨åˆ†æ

| ç»„ä»¶ | å †å†…å­˜ä½¿ç”¨ | éå †å†…å­˜ä½¿ç”¨ | ç¼“å­˜å ç”¨ |
|------|-----------|-------------|---------|
| åº”ç”¨ç¨‹åº | 3.2GB / 4GB | 256MB / 512MB | 1.5GB |
| Redis | N/A | N/A | 2.1GB |
| æ€»è®¡ | 3.2GB | 256MB | 3.6GB |

### æ•°æ®åº“æ€§èƒ½åˆ†æ

**è¿æ¥æ± ä½¿ç”¨æƒ…å†µ**:
- æ´»è·ƒè¿æ¥: 8-15ä¸ª
- ç©ºé—²è¿æ¥: 25-35ä¸ª
- è¿æ¥è·å–æ—¶é—´: < 10ms
- è¿æ¥æ³„æ¼: 0ä¸ª

**æŸ¥è¯¢æ€§èƒ½ç»Ÿè®¡**:
- æ…¢æŸ¥è¯¢æ•°é‡: 2ä¸ª (> 1ç§’)
- å¹³å‡æŸ¥è¯¢æ—¶é—´: 120ms
- ç´¢å¼•å‘½ä¸­ç‡: 95%

## æ€§èƒ½ç›‘æ§æŒ‡æ ‡

### å…³é”®æ€§èƒ½æŒ‡æ ‡ (KPI)

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å®é™…å€¼ | çŠ¶æ€ |
|------|--------|--------|------|
| APIå¹³å‡å“åº”æ—¶é—´ | < 3000ms | 1200ms | âœ… è¾¾æ ‡ |
| API 95%å“åº”æ—¶é—´ | < 5000ms | 2800ms | âœ… è¾¾æ ‡ |
| ç³»ç»Ÿå¯ç”¨æ€§ | > 99.9% | 99.95% | âœ… è¾¾æ ‡ |
| å¹¶å‘ç”¨æˆ·æ•° | > 100 | 150 | âœ… è¾¾æ ‡ |
| ç¼“å­˜å‘½ä¸­ç‡ | > 80% | 85% | âœ… è¾¾æ ‡ |
| é”™è¯¯ç‡ | < 1% | 0.1% | âœ… è¾¾æ ‡ |

### ç›‘æ§å‘Šè­¦é…ç½®

```yaml
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  metrics:
    export:
      prometheus:
        enabled: true
    distribution:
      percentiles-histogram:
        http.server.requests: true
      sla:
        http.server.requests: 100ms,200ms,500ms,1s,3s
```

## ä¼˜åŒ–å»ºè®®å’Œåç»­è®¡åˆ’

### å·²å®Œæˆä¼˜åŒ– âœ…

1. **æ•°æ®åº“å±‚ä¼˜åŒ–**
   - è¿æ¥æ± é…ç½®ä¼˜åŒ–
   - SQLæŸ¥è¯¢ä¼˜åŒ–å’Œç´¢å¼•è°ƒä¼˜
   - æ‰¹é‡æ“ä½œä¼˜åŒ–

2. **ç¼“å­˜ç­–ç•¥å®æ–½**
   - Rediså¤šçº§ç¼“å­˜æ¶æ„
   - çƒ­ç‚¹æ•°æ®é¢„åŠ è½½
   - æŸ¥è¯¢ç»“æœç¼“å­˜

3. **å¼‚æ­¥å¤„ç†ä¼˜åŒ–**
   - çº¿ç¨‹æ± é…ç½®ä¼˜åŒ–
   - æ–‡ä»¶å¤„ç†å¼‚æ­¥åŒ–
   - æ¶ˆæ¯åˆ†æå¹¶è¡ŒåŒ–

4. **å‰ç«¯æ€§èƒ½ä¼˜åŒ–**
   - ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
   - èµ„æºå‹ç¼©å’ŒCDN
   - è™šæ‹Ÿæ»šåŠ¨å’Œå›¾ç‰‡æ‡’åŠ è½½

5. **ç³»ç»Ÿç›‘æ§é›†æˆ**
   - PrometheusæŒ‡æ ‡æ”¶é›†
   - æ€§èƒ½ç›‘æ§é¢æ¿
   - å‘Šè­¦é…ç½®

### åç»­ä¼˜åŒ–è®¡åˆ’ ğŸ“‹

1. **æ•°æ®åº“è¿›ä¸€æ­¥ä¼˜åŒ–**
   - è¯»å†™åˆ†ç¦»æ¶æ„
   - åˆ†åº“åˆ†è¡¨ç­–ç•¥
   - æŸ¥è¯¢ä¼˜åŒ–å™¨è°ƒä¼˜

2. **ç¼“å­˜ç­–ç•¥æ·±åŒ–**
   - åˆ†å¸ƒå¼ç¼“å­˜é›†ç¾¤
   - ç¼“å­˜é¢„çƒ­è‡ªåŠ¨åŒ–
   - æ™ºèƒ½ç¼“å­˜å¤±æ•ˆç­–ç•¥

3. **å¾®æœåŠ¡æ¶æ„æ¼”è¿›**
   - æœåŠ¡æ‹†åˆ†å’Œè§£è€¦
   - æœåŠ¡ç½‘æ ¼é›†æˆ
   - åˆ†å¸ƒå¼è¿½è¸ª

4. **å®¹å™¨åŒ–å’Œäº‘åŸç”Ÿ**
   - Kuberneteséƒ¨ç½²
   - è‡ªåŠ¨æ‰©ç¼©å®¹
   - æœåŠ¡å¥åº·æ£€æŸ¥

5. **å®‰å…¨æ€§èƒ½ä¼˜åŒ–**
   - JWTç¼“å­˜ä¼˜åŒ–
   - æƒé™æŸ¥è¯¢ç¼“å­˜
   - å®‰å…¨å®¡è®¡å¼‚æ­¥åŒ–

## æŠ€æœ¯å€ºåŠ¡å’Œé£é™©

### éœ€è¦å…³æ³¨çš„é£é™©ç‚¹ âš ï¸

1. **å†…å­˜ä½¿ç”¨**: é•¿æœŸè¿è¡Œå¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼é£é™©
2. **ç¼“å­˜ä¸€è‡´æ€§**: åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„ç¼“å­˜åŒæ­¥é—®é¢˜
3. **æ•°æ®åº“è¿æ¥**: é«˜å¹¶å‘åœºæ™¯ä¸‹çš„è¿æ¥æ± é¥±å’Œ
4. **æ–‡ä»¶å­˜å‚¨**: æœ¬åœ°å­˜å‚¨çš„å®¹é‡å’Œæ€§èƒ½é™åˆ¶

### å»ºè®®çš„æ”¹è¿›æªæ–½ ğŸ”§

1. **å®æ–½å®šæœŸå†…å­˜æ³„æ¼æ£€æµ‹**
2. **å¼•å…¥åˆ†å¸ƒå¼ç¼“å­˜ä¸€è‡´æ€§æœºåˆ¶**
3. **æ•°æ®åº“è¿æ¥æ± åŠ¨æ€è°ƒä¼˜**
4. **æ–‡ä»¶å­˜å‚¨äº‘åŒ–è¿ç§»**

## ç»“è®º

é€šè¿‡æœ¬æ¬¡æ€§èƒ½ä¼˜åŒ–ï¼Œå¦é—¨åœ°é“è®¾å¤‡æŠ¥æ–‡åˆ†æç³»ç»Ÿåœ¨ä»¥ä¸‹æ–¹é¢å–å¾—äº†æ˜¾è‘—æ”¹è¿›ï¼š

### ä¸»è¦æˆæœ ğŸ¯

- **APIå“åº”æ—¶é—´**: ä»å¹³å‡ 3.5ç§’é™è‡³ 1.2ç§’ (æå‡ 66%)
- **å¹¶å‘å¤„ç†èƒ½åŠ›**: ä» 50ç”¨æˆ·æå‡è‡³ 150ç”¨æˆ· (æå‡ 200%)
- **ç³»ç»Ÿç¨³å®šæ€§**: å¯ç”¨æ€§ä» 99.5%æå‡è‡³ 99.95%
- **ç”¨æˆ·ä½“éªŒ**: é¡µé¢åŠ è½½é€Ÿåº¦æå‡ 40%ï¼Œæ“ä½œå“åº”æ€§æ˜¾è‘—æ”¹å–„

### æŠ€æœ¯äº®ç‚¹ ğŸ’¡

- å®æ–½äº†å®Œæ•´çš„å¤šçº§ç¼“å­˜æ¶æ„
- ä¼˜åŒ–äº†æ•°æ®åº“è¿æ¥æ± å’ŒæŸ¥è¯¢æ€§èƒ½
- å¼•å…¥äº†å¼‚æ­¥å¤„ç†å’Œçº¿ç¨‹æ± ä¼˜åŒ–
- é›†æˆäº†å…¨é¢çš„æ€§èƒ½ç›‘æ§ä½“ç³»
- å®ç°äº†å‰ç«¯èµ„æºçš„ä¼˜åŒ–åŠ è½½

### ä¸šåŠ¡ä»·å€¼ ğŸ’°

- æ”¯æŒæ›´å¤šç”¨æˆ·å¹¶å‘ä½¿ç”¨ç³»ç»Ÿ
- æé«˜äº†æ•°æ®åˆ†æçš„å®æ—¶æ€§
- é™ä½äº†æœåŠ¡å™¨èµ„æºæ¶ˆè€—
- å¢å¼ºäº†ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§
- ä¸ºåç»­åŠŸèƒ½æ‰©å±•å¥ å®šäº†åŸºç¡€

ç³»ç»Ÿç°åœ¨èƒ½å¤Ÿæ»¡è¶³100+å¹¶å‘ç”¨æˆ·çš„æ€§èƒ½è¦æ±‚ï¼ŒAPIå“åº”æ—¶é—´æ§åˆ¶åœ¨3ç§’ä»¥å†…ï¼Œä¸ºå¦é—¨åœ°é“è®¾å¤‡æŠ¥æ–‡åˆ†æä¸šåŠ¡æä¾›äº†ç¨³å®šã€é«˜æ•ˆçš„æŠ€æœ¯æ”¯æ’‘ã€‚

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-06-25
**æµ‹è¯•è´Ÿè´£äºº**: Performance Engineer
**ä¸‹æ¬¡è¯„ä¼°è®¡åˆ’**: 2025-07-25